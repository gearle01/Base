<!DOCTYPE html>
<html lang="pt-BR" class="admin-panel">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel de Administração</title>
    <meta name="robots" content="noindex, nofollow">

    <!-- Tailwind CSS -->
    <link rel="stylesheet" href="css/tailwind.css">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link id="dynamic-favicon" rel="icon" type="image/png" href="images/favicon.png">
</head>

<body class="bg-gray-50 font-sans text-gray-700 antialiased overflow-hidden h-screen flex flex-col">
    <!-- Header -->
    <header class="bg-white border-b border-gray-200 shadow-sm z-30 flex-none h-16">
        <div class="max-w-[1920px] mx-auto px-4 sm:px-6 lg:px-8 h-full flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div
                    class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold shadow-md shadow-blue-600/20">
                    <i class="fas fa-cog"></i>
                </div>
                <h2 class="text-xl font-bold text-gray-900 tracking-tight">Painel de Controle</h2>
            </div>

            <div class="flex items-center gap-4">
                <div class="bg-gray-100 rounded-lg p-1 flex items-center gap-1 border border-gray-200">
                    <button onclick="setPreviewMode('desktop')" id="btn-desktop"
                        class="p-1.5 rounded bg-white shadow-sm text-gray-700 hover:text-blue-600 transition-all active-mode">
                        <i class="fas fa-desktop"></i>
                    </button>
                    <button onclick="setPreviewMode('mobile')" id="btn-mobile"
                        class="p-1.5 rounded text-gray-400 hover:text-blue-600 transition-all">
                        <i class="fas fa-mobile-alt"></i>
                    </button>
                </div>
                <div id="saveStatus"
                    class="save-status saved flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-colors bg-green-50 text-green-700 border border-green-200">
                    <span id="saveText">✓ Salvo</span>
                </div>
                <button onclick="saveConfig()"
                    class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium shadow-sm transition-all focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 text-sm flex items-center gap-2">
                    <i class="fas fa-save"></i> Salvar Alterações
                </button>
                <button onclick="logout()"
                    class="bg-white hover:bg-gray-50 text-gray-700 px-4 py-2 rounded-lg font-medium border border-gray-300 shadow-sm transition-all text-sm flex items-center gap-2">
                    <i class="fas fa-sign-out-alt"></i> Sair
                </button>
            </div>
        </div>
    </header>

    <div class="flex flex-1 overflow-hidden">
        <main class="flex-1 flex max-w-[1920px] mx-auto w-full">

            <!-- Config Column (Left) -->
            <div
                class="w-full lg:w-[450px] xl:w-[500px] flex flex-col border-r border-gray-200 bg-white h-full shadow-[4px_0_24px_rgba(0,0,0,0.02)] z-20">
                <div class="p-6 overflow-y-auto flex-1 custom-scrollbar space-y-8 pb-24">

                    <!-- Geral Section -->
                    <section id="geral" class="space-y-4">
                        <div class="flex items-center gap-2 pb-2 border-b border-gray-100">
                            <i class="fas fa-sliders-h text-blue-600"></i>
                            <h3 class="text-lg font-bold text-gray-900">Geral</h3>
                        </div>

                        <div class="space-y-4">
                            <div>
                                <label for="empresaNome" class="block text-sm font-medium text-gray-700 mb-1">Nome da
                                    Empresa</label>
                                <input type="text" id="empresaNome"
                                    class="w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all outline-none text-sm placeholder-gray-400 font-medium"
                                    placeholder="Nome que aparece no site" oninput="markAsUnsaved(); update();">
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Tipo de Logo</label>
                                <input type="hidden" id="logoType" value="text">
                                <div class="flex p-1 bg-gray-100 rounded-lg">
                                    <button
                                        class="flex-1 py-1.5 text-sm font-medium rounded-md transition-all text-gray-600 hover:text-gray-900 focus:outline-none focus:bg-white focus:shadow-sm focus:text-blue-600"
                                        onclick="setLogoType('text')">Texto</button>
                                    <button
                                        class="flex-1 py-1.5 text-sm font-medium rounded-md transition-all text-gray-600 hover:text-gray-900 focus:outline-none focus:bg-white focus:shadow-sm focus:text-blue-600"
                                        onclick="setLogoType('image')">Imagem</button>
                                </div>
                            </div>

                            <div class="hidden space-y-3" id="logoImageInputGroup">
                                <label class="block text-sm font-medium text-gray-700">Upload do Logo</label>
                                <div class="relative group">
                                    <div class="image-preview w-full h-32 bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl flex items-center justify-center bg-contain bg-center bg-no-repeat transition-all group-hover:border-blue-400 group-hover:bg-blue-50/30"
                                        id="logoPreview">
                                        <div class="text-center text-gray-400 group-hover:text-blue-500">
                                            <i class="fas fa-cloud-upload-alt text-2xl mb-1"></i>
                                            <p class="text-xs">Arraste ou clique</p>
                                        </div>
                                    </div>
                                    <input type="file" id="logoUpload"
                                        class="absolute inset-0 w-full h-full opacity-0 cursor-pointer"
                                        accept="image/png, image/jpeg, image/svg+xml, image/webp"
                                        onchange="handleImageUpload(event, 'logoImageUrl', '#logoPreview')">
                                </div>
                                <p class="text-xs text-gray-500 mt-1">Recomendado: 250x100px (PNG ou SVG)</p>
                                <input type="text" id="logoImageUrl"
                                    class="w-full text-xs text-gray-500 bg-gray-50 border border-gray-200 rounded px-2 py-1 select-all"
                                    placeholder="URL do logo (automático)" readonly
                                    oninput="markAsUnsaved(); update();">
                            </div>

                            <div class="space-y-3">
                                <label class="block text-sm font-medium text-gray-700">Favicon</label>
                                <div class="flex gap-4 items-center">
                                    <div class="relative w-16 h-16 flex-shrink-0 group">
                                        <div class="w-full h-full bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-contain bg-center bg-no-repeat"
                                            id="faviconPreview"></div>
                                        <input type="file" id="faviconUpload"
                                            class="absolute inset-0 w-full h-full opacity-0 cursor-pointer"
                                            accept="image/png, image/ico, image/svg+xml"
                                            onchange="handleImageUpload(event, 'faviconImageUrl', '#faviconPreview')">
                                    </div>
                                    <div class="flex-1">
                                        <input type="text" id="faviconImageUrl"
                                            class="w-full text-xs text-gray-500 bg-gray-50 border border-gray-200 rounded px-2 py-1 select-all mb-1"
                                            placeholder="URL do favicon" readonly oninput="markAsUnsaved(); update();">
                                        <p class="text-xs text-gray-500">Recomendado: 512x512px (PNG ou ICO)</p>
                                    </div>
                                </div>
                            </div>

                            <div>
                                <label for="bannerTitulo" class="block text-sm font-medium text-gray-700 mb-1">Título do
                                    Banner</label>
                                <input type="text" id="bannerTitulo"
                                    class="w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm font-medium"
                                    placeholder="Título principal" oninput="markAsUnsaved(); update();">
                            </div>
                            <div>
                                <label for="bannerSubtitulo"
                                    class="block text-sm font-medium text-gray-700 mb-1">Subtítulo do Banner</label>
                                <input type="text" id="bannerSubtitulo"
                                    class="w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm"
                                    placeholder="Texto de apoio" oninput="markAsUnsaved(); update();">
                            </div>

                            <div class="space-y-3">
                                <label class="block text-sm font-medium text-gray-700">Imagem de Fundo do Banner</label>
                                <div class="relative group">
                                    <div class="image-preview w-full h-40 bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl flex items-center justify-center bg-cover bg-center transition-all group-hover:border-blue-400 group-hover:bg-blue-50/30"
                                        id="bannerPreview">
                                        <div class="text-center text-gray-400 group-hover:text-blue-500 drop-shadow-sm">
                                            <i class="fas fa-image text-3xl mb-2"></i>
                                            <p class="text-xs font-medium">Trocar Background</p>
                                        </div>
                                    </div>
                                    <input type="file" id="bannerUpload"
                                        class="absolute inset-0 w-full h-full opacity-0 cursor-pointer"
                                        accept="image/png, image/jpeg, image/webp"
                                        onchange="handleImageUpload(event, 'bannerImagem', '#bannerPreview')">
                                </div>
                                <p class="text-xs text-gray-500">Recomendado: 1920x1080px (Alta Resolução)</p>
                                <input type="text" id="bannerImagem"
                                    class="w-full text-xs text-gray-500 bg-gray-50 border border-gray-200 rounded px-2 py-1 select-all"
                                    placeholder="URL da imagem" readonly oninput="markAsUnsaved(); update();">
                            </div>
                        </div>
                    </section>

                    <!-- Cores e Fontes Section -->
                    <section id="cores" class="space-y-4 pt-6 border-t border-gray-100">
                        <div class="flex items-center gap-2 pb-2 border-b border-gray-100">
                            <i class="fas fa-palette text-purple-600"></i>
                            <h3 class="text-lg font-bold text-gray-900">Aparência</h3>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="corPrimaria" class="block text-sm font-medium text-gray-700 mb-2">Cor
                                    Primária</label>
                                <div class="flex items-center gap-2">
                                    <input type="color" id="corPrimaria"
                                        class="h-10 w-10 p-1 bg-white border border-gray-200 rounded cursor-pointer"
                                        value="#007bff" oninput="markAsUnsaved(); update();">
                                    <span class="text-xs text-gray-500 font-mono">Principal</span>
                                </div>
                            </div>
                            <div>
                                <label for="corSecundaria" class="block text-sm font-medium text-gray-700 mb-2">Cor
                                    Secundária</label>
                                <div class="flex items-center gap-2">
                                    <input type="color" id="corSecundaria"
                                        class="h-10 w-10 p-1 bg-white border border-gray-200 rounded cursor-pointer"
                                        value="#28a745" oninput="markAsUnsaved(); update();">
                                    <span class="text-xs text-gray-500 font-mono">Destaque</span>
                                </div>
                            </div>
                        </div>

                        <div>
                            <label for="fontUrl" class="block text-sm font-medium text-gray-700 mb-1">URL da Fonte
                                (Google Fonts)</label>
                            <input type="text" id="fontUrl"
                                class="w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none text-sm font-mono text-gray-600"
                                placeholder="https://..." oninput="markAsUnsaved(); update();">
                        </div>
                        <div>
                            <label for="fontFamily" class="block text-sm font-medium text-gray-700 mb-1">Nome da Fonte
                                (CSS)</label>
                            <input type="text" id="fontFamily"
                                class="w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none text-sm font-mono text-gray-600"
                                placeholder="'Roboto', sans-serif" oninput="markAsUnsaved(); update();">
                        </div>
                    </section>

                    <!-- Sobre Section -->
                    <section id="sobre" class="space-y-4 pt-6 border-t border-gray-100">
                        <div class="flex items-center gap-2 pb-2 border-b border-gray-100">
                            <i class="fas fa-info-circle text-teal-600"></i>
                            <h3 class="text-lg font-bold text-gray-900">Sobre</h3>
                        </div>

                        <div>
                            <label for="sobreTexto" class="block text-sm font-medium text-gray-700 mb-1">Texto
                                Institucional</label>
                            <textarea id="sobreTexto"
                                class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none text-sm leading-relaxed custom-scrollbar"
                                rows="6" placeholder="Escreva sobre sua empresa..."
                                oninput="markAsUnsaved(); update();"></textarea>
                        </div>

                        <div class="space-y-3">
                            <label class="block text-sm font-medium text-gray-700">Imagem da Seção Sobre</label>
                            <div class="relative group">
                                <div class="image-preview w-full h-40 bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl flex items-center justify-center bg-cover bg-center transition-all group-hover:border-teal-400 group-hover:bg-teal-50/30"
                                    id="sobrePreview">
                                    <div class="text-center text-gray-400 group-hover:text-teal-500">
                                        <i class="fas fa-camera text-3xl mb-2"></i>
                                        <p class="text-xs">Alterar Imagem</p>
                                    </div>
                                </div>
                                <input type="file" id="sobreUpload"
                                    class="absolute inset-0 w-full h-full opacity-0 cursor-pointer"
                                    accept="image/png, image/jpeg, image/webp"
                                    onchange="handleImageUpload(event, 'sobreImagem', '#sobrePreview')">
                            </div>
                            <p class="text-xs text-gray-500">Recomendado: 800x800px ou Vertical (Alta Qualidade)</p>
                            <input type="text" id="sobreImagem"
                                class="w-full text-xs text-gray-500 bg-gray-50 border border-gray-200 rounded px-2 py-1 select-all"
                                placeholder="URL" readonly oninput="markAsUnsaved(); update();">
                        </div>
                    </section>

                    <!-- Produtos Section -->
                    <section id="produtos" class="space-y-4 pt-6 border-t border-gray-100">
                        <div class="flex items-center justify-between pb-2 border-b border-gray-100">
                            <div class="flex items-center gap-2">
                                <i class="fas fa-box-open text-orange-500"></i>
                                <h3 class="text-lg font-bold text-gray-900">Produtos</h3>
                            </div>
                            <button
                                class="px-3 py-1.5 bg-orange-50 text-orange-600 text-xs font-bold rounded-lg hover:bg-orange-100 transition-colors"
                                onclick="openProdutoModal(-1)">
                                <i class="fas fa-plus mr-1"></i> Adicionar
                            </button>
                        </div>
                        <div id="produtosList" class="space-y-3"></div>
                    </section>

                    <!-- Contact Section -->
                    <section id="contato" class="space-y-4 pt-6 border-t border-gray-100">
                        <div class="flex items-center gap-2 pb-2 border-b border-gray-100">
                            <i class="fas fa-address-card text-red-500"></i>
                            <h3 class="text-lg font-bold text-gray-900">Contato</h3>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="telefone"
                                    class="block text-sm font-medium text-gray-700 mb-1">WhatsApp</label>
                                <div class="relative">
                                    <div
                                        class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400">
                                        <i class="fab fa-whatsapp"></i>
                                    </div>
                                    <input type="tel" id="telefone"
                                        class="w-full pl-9 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-red-500 outline-none text-sm"
                                        placeholder="(11) 99999-9999" oninput="markAsUnsaved(); update();">
                                </div>
                            </div>
                            <div>
                                <label for="telefone2" class="block text-sm font-medium text-gray-700 mb-1">Telefone
                                    2</label>
                                <div class="relative">
                                    <div
                                        class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400">
                                        <i class="fas fa-phone"></i>
                                    </div>
                                    <input type="tel" id="telefone2"
                                        class="w-full pl-9 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-red-500 outline-none text-sm"
                                        placeholder="Opcional" oninput="markAsUnsaved(); update();">
                                </div>
                            </div>
                        </div>

                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700 mb-1">E-mail</label>
                            <input type="email" id="email"
                                class="w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-red-500 outline-none text-sm"
                                oninput="markAsUnsaved(); update();">
                        </div>
                        <div>
                            <label for="endereco" class="block text-sm font-medium text-gray-700 mb-1">Endereço</label>
                            <input type="text" id="endereco"
                                class="w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-red-500 outline-none text-sm"
                                oninput="markAsUnsaved(); update();">
                        </div>

                        <div class="bg-gray-50 p-4 rounded-xl border border-gray-200 space-y-4">
                            <label class="flex items-center gap-3 cursor-pointer">
                                <div
                                    class="relative inline-block w-10 h-6 align-middle select-none transition duration-200 ease-in">
                                    <input type="checkbox" id="mostrarMapa"
                                        class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer border-gray-300 left-0.5 top-0.5 checked:right-0.5 checked:left-auto checked:border-green-500 focus:outline-none transition-all"
                                        onchange="markAsUnsaved(); update();">
                                    <label for="mostrarMapa"
                                        class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"></label>
                                </div>
                                <span class="text-sm font-medium text-gray-700">Mostrar Mapa no Site</span>
                            </label>

                            <div class="grid grid-cols-2 gap-4">
                                <input type="number" id="latitude"
                                    class="px-3 py-2 bg-white border border-gray-200 rounded-lg text-xs"
                                    placeholder="Lat" oninput="markAsUnsaved(); update();">
                                <input type="number" id="longitude"
                                    class="px-3 py-2 bg-white border border-gray-200 rounded-lg text-xs"
                                    placeholder="Lng" oninput="markAsUnsaved(); update();">
                            </div>
                            <small class="text-xs text-gray-500 block">Clique no mapa abaixo para marcar a localização
                                exata.</small>
                            <div id="adminMap" class="w-full h-48 rounded-lg border border-gray-300 shadow-inner"></div>
                        </div>
                    </section>

                    <!-- Social Section -->
                    <section id="social" class="space-y-4 pt-6 border-t border-gray-100">
                        <div class="flex items-center justify-between pb-2 border-b border-gray-100">
                            <div class="flex items-center gap-2">
                                <i class="fas fa-share-alt text-blue-500"></i>
                                <h3 class="text-lg font-bold text-gray-900">Redes Sociais</h3>
                            </div>
                            <button
                                class="px-3 py-1.5 bg-blue-50 text-blue-600 text-xs font-bold rounded-lg hover:bg-blue-100 transition-colors"
                                onclick="addSocialLink()">
                                <i class="fas fa-plus mr-1"></i> Adicionar
                            </button>
                        </div>
                        <div id="socialLinksList" class="space-y-2"></div>
                        <div id="socialEmptyState"
                            class="text-center py-6 bg-gray-50 rounded-lg border border-dashed border-gray-300">
                            <p class="text-sm text-gray-500">Nenhuma rede social adicionada.</p>
                        </div>
                    </section>

                    <!-- Modulos Section -->
                    <section id="modulos" class="space-y-4 pt-6 border-t border-gray-100 pb-8">
                        <div class="flex items-center gap-2 pb-2 border-b border-gray-100">
                            <i class="fas fa-layer-group text-gray-600"></i>
                            <h3 class="text-lg font-bold text-gray-900">Visibilidade</h3>
                        </div>

                        <div class="module-toggle-list space-y-3">
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <span class="text-sm font-medium text-gray-700">Seção Sobre</span>
                                <button
                                    class="module-switch w-12 h-6 rounded-full bg-gray-300 transition-colors relative cursor-pointer focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                                    data-module="sobre" onclick="toggleModule('sobre')">
                                    <span
                                        class="switch-thumb absolute top-1 left-1 bg-white w-4 h-4 rounded-full shadow-sm transition-transform duration-200 transform translate-x-0"></span>
                                </button>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <span class="text-sm font-medium text-gray-700">Seção Produtos</span>
                                <button
                                    class="module-switch w-12 h-6 rounded-full bg-gray-300 transition-colors relative cursor-pointer focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                                    data-module="produtos" onclick="toggleModule('produtos')">
                                    <span
                                        class="switch-thumb absolute top-1 left-1 bg-white w-4 h-4 rounded-full shadow-sm transition-transform duration-200 transform translate-x-0"></span>
                                </button>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <span class="text-sm font-medium text-gray-700">Seção Contato</span>
                                <button
                                    class="module-switch w-12 h-6 rounded-full bg-gray-300 transition-colors relative cursor-pointer focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                                    data-module="contato" onclick="toggleModule('contato')">
                                    <span
                                        class="switch-thumb absolute top-1 left-1 bg-white w-4 h-4 rounded-full shadow-sm transition-transform duration-200 transform translate-x-0"></span>
                                </button>
                            </div>
                        </div>
                    </section>
                </div>
            </div>

            <!-- Preview Column (Right) -->
            <div class="flex-1 bg-gray-100 relative hidden lg:block overflow-hidden">
                <div id="preview-card"
                    class="absolute inset-8 rounded-2xl shadow-2xl border border-gray-200 bg-white overflow-hidden flex flex-col transition-all duration-500 ease-in-out mx-auto">
                    <div class="bg-gray-100 border-b border-gray-200 p-2 flex gap-1.5 pl-4">
                        <div class="w-3 h-3 rounded-full bg-red-400"></div>
                        <div class="w-3 h-3 rounded-full bg-yellow-400"></div>
                        <div class="w-3 h-3 rounded-full bg-green-400"></div>
                    </div>
                    <iframe id="preview-iframe" src="index.html" class="w-full h-full bg-white"
                        title="Preview do Site"></iframe>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <!-- Produto Modal -->
    <div id="produtoModal"
        class="fixed inset-0 z-50 hidden flex items-center justify-center bg-black/50 backdrop-blur-sm opacity-0 transition-opacity duration-300">
        <div
            class="bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 transform scale-95 transition-transform duration-300 p-6 space-y-4">
            <div class="flex justify-between items-center">
                <h4 id="produtoModalTitle" class="text-xl font-bold text-gray-900">Editar Produto</h4>
                <button onclick="closeProdutoModal()" class="text-gray-400 hover:text-gray-600 transition-colors">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <input type="hidden" id="produtoId">

            <div class="space-y-3">
                <label class="block text-sm font-medium text-gray-700">Imagem</label>
                <div
                    class="relative group h-48 bg-gray-50 border-2 border-dashed border-gray-200 rounded-xl overflow-hidden hover:border-blue-400 transition-colors">
                    <div class="image-preview absolute inset-0 bg-contain bg-center bg-no-repeat" id="produtoPreview"
                        style="background-image: url('');"></div>
                    <div
                        class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 bg-black/10 transition-opacity pointer-events-none">
                        <span class="bg-white px-3 py-1 rounded-full text-xs font-bold shadow-sm">Alterar</span>
                    </div>
                    <input type="file" id="produtoUpload"
                        class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" accept="image/*"
                        onchange="handleImageUpload(event, 'produtoImageUrl', '#produtoPreview')">
                </div>
                <input type="hidden" id="produtoImageUrl">
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Nome do Produto</label>
                <input type="text" id="produtoNome"
                    class="w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Preço / Valor</label>
                <input type="text" id="produtoPreco"
                    class="w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Detalhes do Produto</label>
                <textarea id="produtoDescricao" rows="5"
                    class="w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm custom-scrollbar"
                    placeholder="Descreva os detalhes completos do produto..."></textarea>
            </div>

            <div class="pt-2">
                <button onclick="saveProduto()"
                    class="w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl shadow-lg shadow-blue-500/30 transition-all hover:scale-[1.02]">Salvar
                    Produto</button>
            </div>
        </div>
    </div>

    <!-- Social Modal -->
    <div id="socialLinkModal"
        class="fixed inset-0 z-50 hidden flex items-center justify-center bg-black/50 backdrop-blur-sm opacity-0 transition-opacity duration-300">
        <div
            class="bg-white rounded-2xl shadow-2xl w-full max-w-sm mx-4 transform scale-95 transition-transform duration-300 p-6 space-y-4">
            <div class="flex justify-between items-center">
                <h4 class="text-xl font-bold text-gray-900">Rede Social</h4>
                <button onclick="closeSocialModal()" class="text-gray-400 hover:text-gray-600 transition-colors">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <input type="hidden" id="currentSocialLinkIndex">

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Nome (ex: Instagram)</label>
                <input type="text" id="socialLinkName"
                    class="w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">URL (Link)</label>
                <input type="url" id="socialLinkUrl"
                    class="w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm">
            </div>

            <div class="pt-2">
                <button onclick="saveSocialLinkChanges()"
                    class="w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl shadow-lg shadow-blue-500/30 transition-all hover:scale-[1.02]">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Confirm Modal -->
    <div id="confirmModal" class="hidden" style="position: fixed; inset: 0; z-index: 9999;">
        <!-- Backdrop -->
        <div style="position: fixed; inset: 0; background: rgba(0,0,0,0.5); backdrop-filter: blur(4px);"></div>

        <!-- Modal Container -->
        <div
            style="position: fixed; inset: 0; display: flex; align-items: center; justify-content: center; padding: 1rem;">
            <div
                style="background: white; border-radius: 16px; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25); width: 100%; max-width: 360px; padding: 24px; animation: modalIn 0.2s ease-out;">
                <!-- Icon -->
                <div style="display: flex; justify-content: center; margin-bottom: 16px;">
                    <div
                        style="width: 56px; height: 56px; border-radius: 50%; background: #FEE2E2; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-exclamation-triangle" style="color: #EF4444; font-size: 24px;"></i>
                    </div>
                </div>

                <!-- Title -->
                <h3 id="confirmModalTitle"
                    style="font-size: 20px; font-weight: 700; color: #111827; text-align: center; margin-bottom: 8px;">
                    Confirmar Ação</h3>

                <!-- Message -->
                <p id="confirmModalMessage"
                    style="color: #6B7280; text-align: center; margin-bottom: 24px; font-size: 14px;">Tem certeza que
                    deseja continuar?</p>

                <!-- Buttons -->
                <div style="display: flex; gap: 12px;">
                    <button id="confirmModalCancel"
                        style="flex: 1; padding: 12px 16px; background: #F3F4F6; color: #374151; font-weight: 600; border-radius: 12px; border: none; cursor: pointer; transition: background 0.2s;"
                        onmouseover="this.style.background='#E5E7EB'" onmouseout="this.style.background='#F3F4F6'">
                        Cancelar
                    </button>
                    <button id="confirmModalConfirm"
                        style="flex: 1; padding: 12px 16px; background: #EF4444; color: white; font-weight: 600; border-radius: 12px; border: none; cursor: pointer; transition: background 0.2s; box-shadow: 0 4px 14px rgba(239,68,68,0.4);"
                        onmouseover="this.style.background='#DC2626'" onmouseout="this.style.background='#EF4444'">
                        Excluir
                    </button>
                </div>
            </div>
        </div>
    </div>

    <style>
        @keyframes modalIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }
    </style>

    <div id="toastContainer"
        style="position: fixed; top: 80px; right: 20px; z-index: 99999; display: flex; flex-direction: column; align-items: flex-end;">
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    <script src="js/firebase-config.local.js"></script>
    <script src="js/firebase-config.js"></script>
    <script src="js/toast.js"></script>
    <script src="js/validation.js"></script>

    <script src="js/leaflet-loader.js" type="module"></script>
    <script src="js/config-manager.js" type="module"></script>
    <script src="js/admin-map.js" type="module"></script>
    <script src="js/smart-cache.js" type="module"></script>

    <script src="js/auth-manager.js"></script>
    <script src="js/firebase-manager.js"></script>
    <script src="js/app.js"></script>

    <script type="module">
        import { adminMap } from './js/admin-map.js';
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                if (document.getElementById('adminMap') && adminMap) {
                    adminMap.init('adminMap').catch(console.error);
                }
            }, 1500);
        });
    </script>
</body>

</html>